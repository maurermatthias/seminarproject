$( document ).ready(function() {
	loadLoginScreen(false);
	teacher.drawTeacherScreen();
});


login = function(){
	sessionInformation.user.pwd=$("#pwd")[0].value;
	sessionInformation.user.name=$("#name")[0].value;
	doGet(sessionInformation.getAccessLevelUrlIdentificated(),loginAction);
}

loginAction=function(text){
	sessionInformation.user.accessLevel=parseInt(text);
	reloadPage()
}

reloadPage=function(){
	if(sessionInformation.user.accessLevel==0){
		reloadNoAccess();
	}else if(sessionInformation.user.accessLevel==1){
		reloadStudent();
	}else if(sessionInformation.user.accessLevel==2){
		reloadTeacher();
	}else if(sessionInformation.user.accessLevel==3){
		reloadAdmin();
	}else{
		$("#bodydiv")[0].innerHTML="<p class='whiteText'>ERROR: unknown access level</p>";
	}
}

reloadNoAccess = function(){
	loadLoginScreen(true);
}

reloadAdmin=function(){
	$("#bodydiv")[0].innerHTML="<p class='whiteText'>access admin</p>";
}

reloadTeacher=function(){
	$("#bodydiv")[0].innerHTML="<p class='whiteText'>access teacher</p>";
}

reloadStudent=function(){
	$("#bodydiv")[0].innerHTML="<p class='whiteText'>access student</p>";
}

loadLoginScreen = function(showLoginFailMessage){
	var html="";
	html+='<div id="box">';
	html+='<form action="javascript:login();"><table><tr><td align="right"><p id="text">Username:</p></td>';
	html+='<td align="left"><input type="text" name="name" id="name"></td></tr><tr><td align="right"><p id="text">Password:</p></td>';
	html+='<td align="left"><input type="password" name="pwd" id="pwd"></td></tr><tr><td align="right"><input type="submit" value="Log In"></td>';
	html+='<td align="left"><input type="reset" value="Reset">';
	html+='</td></tr></table></form>';
	if(showLoginFailMessage){
		html+='<div class="redText" id="loginFailedMessage">Login Failed! - Wrong Password or Username.</div>';
	}
	html+='</div>';
	$("#bodydiv")[0].innerHTML=html;
	sessionInformation.printAlert("Login Failed! - Wrong Password or Username.",5000);
	if(showLoginFailMessage){
		setTimeout(function() { $("#loginFailedMessage")[0].outerHTML=""; }, 5000);
	}
}